<div class="container-fluid">
  <div class="row">
    <div class="col-md-12">
      <h2>Administration</h2>
    </div>
  </div>
  <div data-ng-controller="AdminCtrl as admin">
    <div data-ng-if="nominate.error" class="row top-buffer">
      <div class="col-md-12">
        <div class="alert alert-danger" role="alert">{{admin.error}}</div>
      </div>
    </div>
    <hr />
    <div class="row">
      <div class="col-md-12">
        <p class="lead">Manage users</p>
      </div>
    </div>
    <div class="row top-buffer">
      <div class="col-sm-2">
        <span>Search for users:</span>
      </div>
      <div class="col-sm-4">
        <input class="form-control"
               data-ng-model="admin.selectedUser"
               uib-typeahead="user as user.display for user in admin.registeredUsers | filter:{display:$viewValue} | limitTo:8"
               placeholder="Name or Email"
               typeahead-show-hint="true">
      </div>
      <div class="col-sm-6">
      </div>
    </div>
    <div class="row top-buffer" data-ng-show="admin.selectedUser.display">
      <div class="col-md-12">
        <p>Update user <strong>{{admin.selectedUser.display}}</strong> - {{admin.selectedUser.role}}</p>
      </div>
    </div>

    <div class="form-group" data-ng-show="admin.selectedUser.display">
      <div class="row">
        <div class="col-sm-1"><p>Name:</p></div>
        <div class="col-sm-5">
          <input type="text" class="form-control" placeholder="Name" data-ng-model="admin.selectedUser.name" required>
        </div>
      </div>
      <div class="row top-buffer-small">
        <div class="col-sm-1"><p>Role:</p></div>
        <div class="col-sm-5">
          <input type="text" class="form-control" placeholder="Your Role" data-ng-model="admin.selectedUser.role" required>
        </div>
      </div>
      <div class="row top-buffer-small">
        <div class="col-sm-1"><p>Boss Email:</p></div>
        <div class="col-sm-5">
          <input type="email" class="form-control" placeholder="Boss's Email" data-ng-model="admin.selectedUser.managerEmail" required>
        </div>
      </div>
      <div class="row top-buffer-small">
        <div class="col-sm-1"><p>Admin User: <span data-ng-show="admin.selectedUser.isAdmin">(Yes)</span>
          <span data-ng-hide="admin.selectedUser.isAdmin">(No)</span></p></div>
        <div class="col-sm-2">
          <div class="btn-group" role="group" aria-label="Is admin user">
            <button class="btn btn-info"
                    for="true"
                    data-ng-model="admin.selectedUser.isAdmin"
                    uib-btn-radio="true">Yes</button>
            <button class="btn btn-info"
                    for="false"
                    data-ng-model="admin.selectedUser.isAdmin"
                    uib-btn-radio="false">No</button>
        </div>
        </div>
        <div class="col-sm-1"><p>User Disabled: <span data-ng-show="admin.selectedUser.isEnabled">(No)</span>
          <span data-ng-hide="admin.selectedUser.isEnabled">(Yes)</span></p></div>
        <div class="col-sm-2">
          <div class="btn-group" role="group" aria-label="Is admin user">
            <button class="btn btn-info"
                    for="false"
                    data-ng-model="admin.selectedUser.isEnabled"
                    uib-btn-radio="false">Yes</button>
            <button class="btn btn-info"
                    for="true"
                    data-ng-model="admin.selectedUser.isEnabled"
                    uib-btn-radio="true">No</button>
          </div>
        </div>
      </div>
      <div class="row top-buffer-small">
        <div class="col-sm-5">
          <button type="submit" class="btn btn-primary" data-ng-click="admin.updateUser()">Update</button>
        </div>
        <div class="col-sm-1">
          <button class="btn btn-default" data-ng-click="admin.clearSelectedUser()">Cancel</button>
        </div>
      </div>
    </div>
    <hr />
    <div class="row top-buffer">
      <div class="col-md-12">
        <p class="lead">Manage review cycles</p>
      </div>
    </div>
    <div data-ng-hide="admin.selectedCycleDetails">
      <div class="row top-buffer">
        <div class="col-md-2"><button class="btn btn-primary" data-ng-click="admin.initialiseNewCycle()">Create New</button></div>
      </div>
      <div class="row top-buffer">
        <div class="col-md-2">
          <span>Edit existing review cycle</span>
        </div>
        <div class="col-md-6">
          <select class="form-control"
                  data-ng-options="cycle as cycle.label for cycle in admin.reviewCycles"
                  data-ng-model="admin.selectedCycle"
                  data-ng-change="admin.getFeedbackCycle(admin.selectedCycle.id)">
          </select>
        </div>
        <div class="col-md-4"></div>
      </div>
    </div>
    <div data-ng-show="admin.selectedCycleDetails">
      <div class="row top-buffer">
        <div class="col-md-2"><button class="btn btn-primary" data-ng-click="admin.updateFeedbackCycle()">Save changes</button></div>
        <div class="col-md-2"><button class="btn btn-default" data-ng-click="admin.previewChanges()">Preview changes</button></div>
        <div class="col-md-2"><button class="btn btn-default" data-ng-click="admin.clearSelectedCycle()">Cancel changes</button></div>
      </div>
      <!--<div ng-include="./feedbackCycleEditFragment.html"></div>-->
      <div class="row top-buffer">
        <div class="col-md-6">
          <p class="lead">Feedback cycle options</p>
        </div>
      </div>
      <div class="row top-buffer">
        <div class="col-md-1">Cycle name:</div>
        <div class="col-md-3">
          <input type="text" class="form-control" placeholder="Feedback cycle name" data-ng-model="admin.selectedCycleDetails.label" required>
        </div>
        <div class="col-md-1">Start date:</div>
        <div class="col-md-3">
          <p class="input-group">
            <input type="text" class="form-control"
                   uib-datepicker-popup="dd-MMMM-yyyy"
                   data-ng-model="admin.selectedCycleDetails.startDate"
                   is-open="admin.startPopup.opened"
                   datepicker-options="dateOptions"
                   ng-required="true" close-text="Close"
                   alt-input-formats="altInputFormats" />
            <span class="input-group-btn">
            <button type="button" class="btn btn-default" data-ng-click="admin.openStart()"><i class="fa fa-calendar"></i></button>
          </span>
          </p>
        </div>
        <div class="col-md-1">End date:</div>
        <div class="col-md-3">
          <p class="input-group">
            <input type="text" class="form-control"
                   uib-datepicker-popup="dd-MMMM-yyyy"
                   data-ng-model="admin.selectedCycleDetails.endDate"
                   is-open="admin.endPopup.opened"
                   datepicker-options="dateOptions"
                   ng-required="true" close-text="Close"
                   alt-input-formats="altInputFormats" />
            <span class="input-group-btn">
            <button type="button" class="btn btn-default" data-ng-click="admin.endStart()"><i class="fa fa-calendar"></i></button>
          </span>
          </p>
        </div>
      </div>
      <div class="row top-buffer">
        <div class="col-sm-2"><p>Feedback cycle is currently enabled: <span data-ng-show="admin.selectedCycleDetails.active">(Yes)</span>
          <span data-ng-hide="admin.selectedCycleDetails.active">(No)</span></p></div>
        <div class="col-sm-2">
          <div class="btn-group" role="group" aria-label="Is admin user">
            <button class="btn btn-info"
                    for="false"
                    data-ng-model="admin.selectedCycleDetails.active"
                    uib-btn-radio="true">Yes</button>
            <button class="btn btn-info"
                    for="true"
                    data-ng-model="admin.selectedCycleDetails.active"
                    uib-btn-radio="false">No</button>
          </div>
        </div>
        <div class="col-sm-2"><p>Automatic sharing with recipient: <span data-ng-show="admin.selectedCycleDetails.hasForcedSharing">(No)</span>
          <span data-ng-hide="admin.selectedCycleDetails.hasForcedSharing">(Yes)</span></p></div>
        <div class="col-sm-2">
          <div class="btn-group" role="group" aria-label="Is admin user">
            <button class="btn btn-info"
                    for="true"
                    data-ng-model="admin.selectedCycleDetails.hasForcedSharing"
                    uib-btn-radio="true">Yes</button>
            <button class="btn btn-info"
                    for="false"
                    data-ng-model="admin.selectedCycleDetails.hasForcedSharing"
                    uib-btn-radio="false">No</button>
          </div>
        </div>
        <div class="col-sm-2"><p>Hide option to share feedback with recipient: <span data-ng-show="admin.selectedCycleDetails.hasOptionalSharing">(No)</span>
          <span data-ng-hide="admin.selectedCycleDetails.hasOptionalSharing">(Yes)</span></p></div>
        <div class="col-sm-2">
          <div class="btn-group" role="group" aria-label="Is admin user">
            <button class="btn btn-info"
                    for="false"
                    data-ng-model="admin.selectedCycleDetails.hasOptionalSharing"
                    uib-btn-radio="false">Yes</button>
            <button class="btn btn-info"
                    for="true"
                    data-ng-model="admin.selectedCycleDetails.hasOptionalSharing"
                    uib-btn-radio="true">No</button>
          </div>
        </div>
      </div>
      <div class="row top-buffer">
        <div class="col-md-6">
          <p class="lead">Feedback cycle questions</p>
        </div>
      </div>
      <div class="row top-buffer" data-ng-repeat="question in admin.selectedCycleDetails.questions">
        <div class="col-sm-2">
          <button class="btn btn-warning" data-ng-click="admin.removeQuestion($index)">Remove question {{$index +1}}</button>
        </div>
        <div class="col-sm-3">
          <textarea class="form-control" class="form-control" placeholder="Question text" data-ng-model="question.text"  rows="3"></textarea>
        </div>
        <div class="col-sm-2">
          <textarea class="form-control" class="form-control" placeholder="Optional help text" data-ng-model="question.helpText"  rows="3"></textarea>
        </div>
        <div class="col-sm-3">
          <textarea class="form-control" placeholder="Response options written in a comma separated list e.g. 'Yes,No' or '1 Strongly Agree,2,3,4,5 Strongly Disagree'" rows="3" data-ng-model="question.responseOptions" ></textarea>
        </div>
        <div class="col-lg-2">
          <div class="btn-group" role="group" aria-label="question response display format">
            <button class="btn btn-info"
                    for="SELECT"
                    data-ng-model="question.format"
                    uib-btn-radio="'SELECT'">Drop-down</button>
            <button class="btn btn-info"
                    for="RADIO"
                    data-ng-model="question.format"
                    uib-btn-radio="'RADIO'">Radio Button</button>
          </div>
        </div>
      </div>
      <div class="row top-buffer">
        <div class="col-md-4">
          <button class="btn btn-info" data-ng-click="admin.addQuestion()">Add question</button>
        </div>
      </div>
      <div class="row top-buffer">
        <div class="col-md-2"><button class="btn btn-primary" data-ng-click="admin.updateFeedbackCycle()">Save changes</button></div>
        <div class="col-md-2"><button class="btn btn-default" data-ng-click="admin.previewChanges()">Preview changes</button></div>
        <div class="col-md-2"><button class="btn btn-default" data-ng-click="admin.clearSelectedCycle()">Cancel changes</button></div>
      </div>
    </div>
    <hr />
    <div class="row top-buffer">
      <div class="col-md-12">
        <p class="lead">Stay tuned folks.  This exciting section is coming soon :)</p>
        <p>Features will include:</p>
        <ul>
          <li>Set users as admin</li>
          <li>Disable registered users</li>
          <li>Create new review cycles</li>
          <li>Update question text, response options and help text</li>
          <li>Disable existing review cycles</li>
          <li>Create a 360 degree review</li>
        </ul>
      </div>
    </div> <!-- end row -->
  </div> <!-- end controller -->
</div>
